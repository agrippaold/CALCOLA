---
interface Props {
  toolSlug: string;
  toolTitle: string;
  lang: string;
}

const { toolSlug, toolTitle, lang } = Astro.props;
const embedUrl = `https://calchub.com/embed/${lang}/${toolSlug}/`;
const embedCode = `<iframe src="${embedUrl}" width="100%" height="500" frameborder="0" style="border:1px solid #e5e7eb;border-radius:8px;" title="${toolTitle}" loading="lazy"></iframe>\n<p style="font-size:12px;text-align:center;margin-top:4px;">Calculator by <a href="https://calchub.com" target="_blank" rel="noopener">CalcHub</a></p>`;
---

<details class="mt-8 bg-white rounded-lg border border-gray-200 p-4">
  <summary class="cursor-pointer text-sm font-medium text-gray-700 hover:text-blue-600">
    Embed this calculator on your website
  </summary>
  <div class="mt-4">
    <p class="text-xs text-gray-500 mb-2">Copy the code below and paste it into your HTML:</p>
    <pre class="bg-gray-50 rounded p-3 text-xs text-gray-700 overflow-x-auto whitespace-pre-wrap break-all border border-gray-100"><code>{embedCode}</code></pre>
    <button
      data-embed-code={embedCode}
      onclick="const btn=this;navigator.clipboard.writeText(btn.dataset.embedCode).then(()=>{btn.textContent='Copied!';setTimeout(()=>btn.textContent='Copy embed code',2000)})"
      class="mt-3 px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors"
    >
      Copy embed code
    </button>
  </div>
</details>
